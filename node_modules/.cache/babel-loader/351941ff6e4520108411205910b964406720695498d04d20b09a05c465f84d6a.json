{"ast":null,"code":"// Copyright (c) 2022, 2024, Oracle and/or its affiliates.\n\n//-----------------------------------------------------------------------------\n//\n// This software is dual-licensed to you under the Universal Permissive License\n// (UPL) 1.0 as shown at https://oss.oracle.com/licenses/upl and Apache License\n// 2.0 as shown at http://www.apache.org/licenses/LICENSE-2.0. You may choose\n// either license.\n//\n// If you elect to accept the software under the Apache License, Version 2.0,\n// the following applies:\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//    https://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n//-----------------------------------------------------------------------------\n\n'use strict';\n\nconst {\n  Buffer\n} = require('buffer');\nconst constants = require(\"../constants.js\");\nconst errors = require(\"../../../errors.js\");\n\n/**\n *\n * Base class for all the RPC messages to support encode/decode functions\n */\nclass Message {\n  constructor(connection) {\n    this.errorInfo = {};\n    this.connection = connection;\n    this.messageType = constants.TNS_MSG_TYPE_FUNCTION;\n    this.functionCode = 0;\n    this.callStatus = 0;\n    this.flushOutBinds = false;\n    this.endOfResponse = false;\n    this.endToEndSeqNum = 0;\n    this.errorOccurred = false;\n    this.warning = undefined;\n  }\n  preProcess() {}\n  async postProcess() {}\n  writeFunctionHeader(buf) {\n    buf.writeUInt8(this.messageType);\n    buf.writeUInt8(this.functionCode);\n    buf.writeSeqNum();\n    if (buf.caps.ttcFieldVersion >= constants.TNS_CCAP_FIELD_VERSION_23_1_EXT_1) {\n      buf.writeUB8(0); // token number\n    }\n  }\n  processErrorInfo(buf) {\n    this.callStatus = buf.readUB4(); // end of call status\n    buf.skipUB2(); // end to end seq number\n    buf.skipUB4(); // current row number\n    buf.skipUB2(); // error number\n    buf.skipUB2(); // array elem error\n    buf.skipUB2(); // array elem error\n    this.errorInfo.cursorId = buf.readUB2(); // cursor id\n    const errorPos = buf.readSB2(); // error position\n    buf.skipUB1(); // sql type (19c and earlier)\n    buf.skipUB1(); // fatal ?\n    buf.skipUB1(); // flags\n    buf.skipUB1(); // user cursor options\n    buf.skipUB1(); // UPI parameter\n    const warnFlag = buf.readUInt8(); // warning flag\n    if (warnFlag & constants.TNS_WARN_COMPILATION_CREATE) {\n      this.warning = errors.getErr(errors.WRN_COMPILATION_CREATE);\n    }\n    this.errorInfo.rowID = buf.readRowID(); // rowid\n    buf.skipUB4(); // OS error\n    buf.skipUB1(); // statement error\n    buf.skipUB1(); // call number\n    buf.skipUB2(); // padding\n    buf.skipUB4(); // success iters\n    const numBytes = buf.readUB4(); // oerrdd (logical rowid)\n    if (numBytes > 0) {\n      buf.skipBytesChunked();\n    }\n    // batch error codes\n    const numErrors = buf.readUB2(); // batch error codes array\n    if (numErrors > 0) {\n      this.errorInfo.batchErrors = [];\n      const firstByte = buf.readUInt8();\n      for (let i = 0; i < numErrors; i++) {\n        if (firstByte === constants.TNS_LONG_LENGTH_INDICATOR) {\n          buf.skipUB4(); // chunk length ignored\n        }\n        const errorCode = buf.readUB2();\n        this.errorInfo.batchErrors.push(new Error(errorCode));\n      }\n      if (firstByte === constants.TNS_LONG_LENGTH_INDICATOR) {\n        buf.skipBytes(1); // ignore end marker\n      }\n    }\n\n    // batch error offset\n    const numOffsets = buf.readUB4(); // batch error row offset array\n    if (numOffsets > 0) {\n      if (numOffsets > 65535) {\n        errors.throwErr(errors.ERR_TOO_MANY_BATCH_ERRORS);\n      }\n      const firstByte = buf.readUInt8();\n      let offset;\n      for (let i = 0; i < numOffsets; i++) {\n        if (firstByte === constants.TNS_LONG_LENGTH_INDICATOR) {\n          buf.skipUB4(); // chunk length ignored\n        }\n        offset = buf.readUB4();\n        if (i < numErrors) {\n          this.errorInfo.batchErrors[i].offset = offset;\n        }\n      }\n      if (firstByte === constants.TNS_LONG_LENGTH_INDICATOR) {\n        buf.skipBytes(1); // ignore end marker\n      }\n    }\n\n    // batch error messages\n    const errMsgArr = buf.readUB2(); // batch error messages array\n    if (errMsgArr > 0) {\n      buf.skipBytes(1); // ignore packed size\n      for (let i = 0; i < errMsgArr; i++) {\n        buf.skipUB2(); // skip chunk length\n\n        this.errorInfo.batchErrors[i].message = buf.readStr(constants.CSFRM_IMPLICIT);\n        buf.skipBytes(2); // ignore end marker\n      }\n    }\n    this.errorInfo.num = buf.readUB4(); // error number (extended)\n    this.errorInfo.rowCount = buf.readUB8(); // row number (extended)\n\n    // fields added in Oracle Database 20c\n    if (buf.caps.ttcFieldVersion >= constants.TNS_CCAP_FIELD_VERSION_20_1) {\n      buf.skipUB4(); // sql type\n      buf.skipUB4(); // server checksum\n    }\n\n    // error message\n    if (this.errorInfo.num !== 0) {\n      this.errorOccurred = true;\n      if (errorPos >= 0) {\n        this.errorInfo.pos = errorPos;\n      }\n      this.errorInfo.message = buf.readStr(constants.CSFRM_IMPLICIT);\n      /*\n       * Remove ending newline from ORA error message\n       */\n      this.errorInfo.message = this.errorInfo.message.trim();\n    }\n    this.endOfResponse = !this.connection.nscon.endOfRequestSupport;\n  }\n  processReturnParameter() {}\n  processWarningInfo(buf) {\n    const errNum = buf.readUB2(); // warning number\n    const numBytes = buf.readUB2(); // length of warning message\n    buf.skipUB2(); // flags\n    if (errNum != 0 && numBytes > 0) {\n      // get message string and remove the ending newline.\n      const message = buf.readStr(constants.CSFRM_IMPLICIT).trim();\n      this.warning = new Error(message);\n      this.warning.errorNum = errNum;\n    }\n  }\n  decode(buf) {\n    this.process(buf);\n  }\n  process(buf) {\n    this.endOfResponse = false;\n    this.flushOutBinds = false;\n    do {\n      this.savePoint(buf);\n      const messageType = buf.readUInt8();\n      this.processMessage(buf, messageType);\n    } while (!this.endOfResponse);\n  }\n  savePoint(buf) {\n    buf.savePoint();\n  }\n  processMessage(buf, messageType) {\n    if (messageType === constants.TNS_MSG_TYPE_ERROR) {\n      this.processErrorInfo(buf);\n    } else if (messageType === constants.TNS_MSG_TYPE_WARNING) {\n      this.processWarningInfo(buf);\n    } else if (messageType === constants.TNS_MSG_TYPE_STATUS) {\n      this.callStatus = buf.readUB4();\n      this.endToEndSeqNum = buf.readUB2();\n      this.endOfResponse = !this.connection.nscon.endOfRequestSupport;\n    } else if (messageType === constants.TNS_MSG_TYPE_PARAMETER) {\n      this.processReturnParameter(buf);\n    } else if (messageType === constants.TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK) {\n      this.processServerSidePiggyBack(buf);\n    } else if (messageType === constants.TNS_MSG_TYPE_END_OF_REQUEST) {\n      this.endOfResponse = true;\n    } else {\n      errors.throwErr(errors.ERR_UNEXPECTED_MESSAGE_TYPE, messageType, buf.pos, buf.packetNum);\n    }\n  }\n  processServerSidePiggyBack(buf) {\n    const opcode = buf.readUInt8();\n    if (opcode === constants.TNS_SERVER_PIGGYBACK_LTXID) {\n      const num_bytes = buf.readUB4();\n      if (num_bytes > 0) {\n        buf.skipBytesChunked();\n      }\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION || opcode === constants.TNS_SERVER_PIGGYBACK_TRACE_EVENT) {\n      // pass\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_OS_PID_MTS) {\n      const numDtys = buf.readUB2();\n      buf.skipUB1();\n      buf.skipBytes(numDtys);\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_SYNC) {\n      buf.skipUB2(); // skip number of DTYs\n      buf.skipUB1(); // skip length of DTYs\n      const num_elements = buf.readUB4();\n      buf.skipBytes(1); // skip length\n      for (let i = 0; i < num_elements; i++) {\n        let temp16 = buf.readUB2();\n        if (temp16 > 0) {\n          // skip key\n          buf.skipBytesChunked();\n        }\n        temp16 = buf.readUB2();\n        if (temp16 > 0) {\n          // skip value\n          buf.skipBytesChunked();\n        }\n        buf.skipUB2(); // skip flags\n      }\n      buf.skipUB4(); // skip overall flags\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_EXT_SYNC) {\n      buf.skipUB2();\n      buf.skipUB1();\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT) {\n      buf.skipUB2(); // skip number of DTYs\n      buf.skipUB1(); // skip length of DTYs\n      buf.skipUB4(); // skip flags\n      buf.skipUB4(); // skip error code\n      buf.skipUB1(); // skip queue\n      const num_bytes = buf.readUB4(); // skip replay context\n      if (num_bytes > 0) {\n        buf.skipBytesChunked();\n      }\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_SESS_RET) {\n      buf.skipUB2();\n      buf.skipUB1();\n      const num_elements = buf.readUB2();\n      if (num_elements > 0) {\n        buf.skipUB1();\n        for (let i = 0; i < num_elements; ++i) {\n          let temp16 = buf.readUB2();\n          if (temp16 > 0) {\n            // skip key\n            buf.skipBytesChunked();\n          }\n          temp16 = buf.readUB2();\n          if (temp16 > 0) {\n            // skip value\n            buf.skipBytesChunked();\n          }\n          buf.skipUB2(); // skip flags\n        }\n      }\n      const flags = buf.readUB4(); // session flags\n      if (flags & constants.TNS_SESSGET_SESSION_CHANGED) {\n        if (this.connection._drcpEstablishSession) {\n          this.connection.statementCache.clearCursors();\n        }\n      }\n      this.connection._drcpEstablishSession = false;\n      buf.skipUB4(); // session id\n      buf.skipUB2(); // serial number\n    } else {\n      errors.throwErr(errors.ERR_UNKOWN_SERVER_SIDE_PIGGYBACK, opcode);\n    }\n  }\n  writePiggybacks(buf) {\n    if (this.connection._currentSchemaModified) {\n      this._writeCurrentSchemaPiggyback(buf);\n    }\n    if (this.connection.statementCache._cursorsToClose.size > 0 && !this.connection._drcpEstablishSession) {\n      this.writeCloseCursorsPiggyBack(buf);\n    }\n    if (this.connection._actionModified || this.connection._clientIdentifierModified || this.connection._dbopModified || this.connection._clientInfoModified || this.connection._moduleModified) {\n      this._writeEndToEndPiggybacks(buf);\n    }\n    if (this.connection._tempLobsTotalSize > 0) {\n      this.writeCloseTempLobsPiggyback(buf);\n    }\n  }\n  writePiggybackHeader(buf, functionCode) {\n    buf.writeUInt8(constants.TNS_MSG_TYPE_PIGGYBACK);\n    buf.writeUInt8(functionCode);\n    buf.writeSeqNum();\n    if (buf.caps.ttcFieldVersion >= constants.TNS_CCAP_FIELD_VERSION_23_1_EXT_1) {\n      buf.writeUB8(0); // token number\n    }\n  }\n  writeCloseCursorsPiggyBack(buf) {\n    this.writePiggybackHeader(buf, constants.TNS_FUNC_CLOSE_CURSORS);\n    buf.writeUInt8(1);\n    this.connection.statementCache.writeCursorsToClose(buf);\n  }\n  writeCloseTempLobsPiggyback(buf) {\n    const lobsToClose = this.connection._tempLobsToClose;\n    const opCode = constants.TNS_LOB_OP_FREE_TEMP | constants.TNS_LOB_OP_ARRAY;\n    this.writePiggybackHeader(buf, constants.TNS_FUNC_LOB_OP);\n    buf.writeUInt8(1); // pointer\n    buf.writeUB4(this.connection._tempLobsTotalSize);\n    buf.writeUInt8(0); // dest LOB locator\n    buf.writeUB4(0);\n    buf.writeUB4(0); // source LOB locator\n    buf.writeUB4(0);\n    buf.writeUInt8(0); // source LOB offset\n    buf.writeUInt8(0); // dest LOB offset\n    buf.writeUInt8(0); // charset\n    buf.writeUB4(opCode);\n    buf.writeUInt8(0); // scn\n    buf.writeUB4(0); // LOB scn\n    buf.writeUB8(0); // LOB scnl\n    buf.writeUB8(0);\n    buf.writeUInt8(0);\n\n    // array LOB fields\n    buf.writeUInt8(0);\n    buf.writeUB4(0);\n    buf.writeUInt8(0);\n    buf.writeUB4(0);\n    buf.writeUInt8(0);\n    buf.writeUB4(0);\n    for (const val of lobsToClose) {\n      buf.writeBytes(val);\n    }\n\n    // Reset Values\n    this.connection._tempLobsToClose = [];\n    this.connection._tempLobsTotalSize = 0;\n  }\n  _writeCurrentSchemaPiggyback(buf) {\n    this.writePiggybackHeader(buf, constants.TNS_FUNC_SET_SCHEMA);\n    buf.writeUInt8(1);\n    const bytes = Buffer.byteLength(this.connection.currentSchema);\n    buf.writeUB4(bytes);\n    buf.writeBytesWithLength(Buffer.from(this.connection.currentSchema));\n  }\n  _writeEndToEndPiggybacks(buf) {\n    let flags = 0;\n\n    // determine which flags to send\n    if (this.connection._actionModified) {\n      flags |= constants.TNS_END_TO_END_ACTION;\n    }\n    if (this.connection._clientIdentifierModified) {\n      flags |= constants.TNS_END_TO_END_CLIENT_IDENTIFIER;\n    }\n    if (this.connection._clientInfoModified) {\n      flags |= constants.TNS_END_TO_END_CLIENT_INFO;\n    }\n    if (this.connection._moduleModified) {\n      flags |= constants.TNS_END_TO_END_MODULE;\n    }\n    if (this.connection._dbOpModified) {\n      flags |= constants.TNS_END_TO_END_DBOP;\n    }\n\n    // write initial packet data\n    this.writePiggybackHeader(buf, constants.TNS_FUNC_SET_END_TO_END_ATTR);\n    buf.writeUInt8(0); // pointer (cidnam)\n    buf.writeUInt8(0); // pointer (cidser)\n    buf.writeUB4(flags);\n    const clientIdentifierBytes = this.writeEndEndTraceValue(buf, this.connection._clientIdentifier, this.connection._clientIdentifierModified);\n    const moduleBytes = this.writeEndEndTraceValue(buf, this.connection._module, this.connection._moduleModified);\n    const actionBytes = this.writeEndEndTraceValue(buf, this.connection._action, this.connection._actionModified);\n\n    // write unsupported bits\n    buf.writeUInt8(0); // pointer (cideci)\n    buf.writeUB4(0); // length (cideci)\n    buf.writeUInt8(0); // cidcct\n    buf.writeUB4(0); // cidecs\n\n    const clientInfoBytes = this.writeEndEndTraceValue(buf, this.connection._clientInfo, this.connection._clientInfoModified);\n    // write unsupported bits\n    buf.writeUInt8(0); // pointer (cideci)\n    buf.writeUB4(0); // length (cideci)\n    buf.writeUInt8(0); // cidcct\n    buf.writeUB4(0); // cidecs\n    const dbOpBytes = this.writeEndEndTraceValue(buf, this.connection._dbOp, this.connection._dbOpModified);\n\n    // write strings\n    if (this.connection._clientIdentifierModified && this.connection._clientIdentifier) {\n      buf.writeBytesWithLength(clientIdentifierBytes);\n    }\n    if (this.connection._moduleModified && this.connection._module) {\n      buf.writeBytesWithLength(moduleBytes);\n    }\n    if (this.connection._actionModified && this.connection._action) {\n      buf.writeBytesWithLength(actionBytes);\n    }\n    if (this.connection._clientInfoModified && this.connection._clientInfo) {\n      buf.writeBytesWithLength(clientInfoBytes);\n    }\n    if (this.connection._dbOpModified && this.connection._dbOp) {\n      buf.writeBytesWithLength(dbOpBytes);\n    }\n\n    // reset flags and values\n    this.connection._actionModified = false;\n    this.connection._action = \"\";\n    this.connection._clientIdentifierModified = false;\n    this.connection._clientIdentifier = \"\";\n    this.connection._clientInfoModified = false;\n    this.connection._clientInfo = \"\";\n    this.connection._dbOpModified = false;\n    this.connection._dbOp = \"\";\n    this.connection._moduleModified = false;\n    this.connection._module = \"\";\n  }\n  writeEndEndTraceValue(buf, value, modified) {\n    // write client identifier header info\n    let writtenBytes;\n    if (modified) {\n      buf.writeUInt8(1); // pointer (client identifier)\n      if (value) {\n        writtenBytes = Buffer.from(value);\n        buf.writeUB4(writtenBytes.length);\n      } else {\n        buf.writeUB4(0);\n      }\n    } else {\n      buf.writeUInt8(0); // pointer (client identifier)\n      buf.writeUB4(0); // length of client identifier\n    }\n    return writtenBytes;\n  }\n\n  // Called when an error is encountered during decode of RPC\n  saveDeferredErr() {\n    if (!this.deferredErr) {\n      this.deferredErr = errors.getErr(...arguments);\n    }\n  }\n}\nmodule.exports = Message;","map":{"version":3,"names":["Buffer","require","constants","errors","Message","constructor","connection","errorInfo","messageType","TNS_MSG_TYPE_FUNCTION","functionCode","callStatus","flushOutBinds","endOfResponse","endToEndSeqNum","errorOccurred","warning","undefined","preProcess","postProcess","writeFunctionHeader","buf","writeUInt8","writeSeqNum","caps","ttcFieldVersion","TNS_CCAP_FIELD_VERSION_23_1_EXT_1","writeUB8","processErrorInfo","readUB4","skipUB2","skipUB4","cursorId","readUB2","errorPos","readSB2","skipUB1","warnFlag","readUInt8","TNS_WARN_COMPILATION_CREATE","getErr","WRN_COMPILATION_CREATE","rowID","readRowID","numBytes","skipBytesChunked","numErrors","batchErrors","firstByte","i","TNS_LONG_LENGTH_INDICATOR","errorCode","push","Error","skipBytes","numOffsets","throwErr","ERR_TOO_MANY_BATCH_ERRORS","offset","errMsgArr","message","readStr","CSFRM_IMPLICIT","num","rowCount","readUB8","TNS_CCAP_FIELD_VERSION_20_1","pos","trim","nscon","endOfRequestSupport","processReturnParameter","processWarningInfo","errNum","errorNum","decode","process","savePoint","processMessage","TNS_MSG_TYPE_ERROR","TNS_MSG_TYPE_WARNING","TNS_MSG_TYPE_STATUS","TNS_MSG_TYPE_PARAMETER","TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK","processServerSidePiggyBack","TNS_MSG_TYPE_END_OF_REQUEST","ERR_UNEXPECTED_MESSAGE_TYPE","packetNum","opcode","TNS_SERVER_PIGGYBACK_LTXID","num_bytes","TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION","TNS_SERVER_PIGGYBACK_TRACE_EVENT","TNS_SERVER_PIGGYBACK_OS_PID_MTS","numDtys","TNS_SERVER_PIGGYBACK_SYNC","num_elements","temp16","TNS_SERVER_PIGGYBACK_EXT_SYNC","TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT","TNS_SERVER_PIGGYBACK_SESS_RET","flags","TNS_SESSGET_SESSION_CHANGED","_drcpEstablishSession","statementCache","clearCursors","ERR_UNKOWN_SERVER_SIDE_PIGGYBACK","writePiggybacks","_currentSchemaModified","_writeCurrentSchemaPiggyback","_cursorsToClose","size","writeCloseCursorsPiggyBack","_actionModified","_clientIdentifierModified","_dbopModified","_clientInfoModified","_moduleModified","_writeEndToEndPiggybacks","_tempLobsTotalSize","writeCloseTempLobsPiggyback","writePiggybackHeader","TNS_MSG_TYPE_PIGGYBACK","TNS_FUNC_CLOSE_CURSORS","writeCursorsToClose","lobsToClose","_tempLobsToClose","opCode","TNS_LOB_OP_FREE_TEMP","TNS_LOB_OP_ARRAY","TNS_FUNC_LOB_OP","writeUB4","val","writeBytes","TNS_FUNC_SET_SCHEMA","bytes","byteLength","currentSchema","writeBytesWithLength","from","TNS_END_TO_END_ACTION","TNS_END_TO_END_CLIENT_IDENTIFIER","TNS_END_TO_END_CLIENT_INFO","TNS_END_TO_END_MODULE","_dbOpModified","TNS_END_TO_END_DBOP","TNS_FUNC_SET_END_TO_END_ATTR","clientIdentifierBytes","writeEndEndTraceValue","_clientIdentifier","moduleBytes","_module","actionBytes","_action","clientInfoBytes","_clientInfo","dbOpBytes","_dbOp","value","modified","writtenBytes","length","saveDeferredErr","deferredErr","arguments","module","exports"],"sources":["C:/Users/Koliv/Desktop/Software/my-react-app/node_modules/oracledb/lib/thin/protocol/messages/base.js"],"sourcesContent":["// Copyright (c) 2022, 2024, Oracle and/or its affiliates.\n\n//-----------------------------------------------------------------------------\n//\n// This software is dual-licensed to you under the Universal Permissive License\n// (UPL) 1.0 as shown at https://oss.oracle.com/licenses/upl and Apache License\n// 2.0 as shown at http://www.apache.org/licenses/LICENSE-2.0. You may choose\n// either license.\n//\n// If you elect to accept the software under the Apache License, Version 2.0,\n// the following applies:\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//    https://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n//-----------------------------------------------------------------------------\n\n'use strict';\n\nconst { Buffer } = require('buffer');\nconst constants = require(\"../constants.js\");\nconst errors = require(\"../../../errors.js\");\n\n/**\n *\n * Base class for all the RPC messages to support encode/decode functions\n */\nclass Message {\n  constructor(connection) {\n    this.errorInfo = {};\n    this.connection = connection;\n    this.messageType = constants.TNS_MSG_TYPE_FUNCTION;\n    this.functionCode = 0;\n    this.callStatus = 0;\n    this.flushOutBinds = false;\n    this.endOfResponse = false;\n    this.endToEndSeqNum = 0;\n    this.errorOccurred = false;\n    this.warning = undefined;\n  }\n\n  preProcess() { }\n  async postProcess() { }\n\n  writeFunctionHeader(buf) {\n    buf.writeUInt8(this.messageType);\n    buf.writeUInt8(this.functionCode);\n    buf.writeSeqNum();\n    if (buf.caps.ttcFieldVersion >= constants.TNS_CCAP_FIELD_VERSION_23_1_EXT_1) {\n      buf.writeUB8(0);                          // token number\n    }\n  }\n\n  processErrorInfo(buf) {\n    this.callStatus = buf.readUB4();            // end of call status\n    buf.skipUB2();                              // end to end seq number\n    buf.skipUB4();                              // current row number\n    buf.skipUB2();                              // error number\n    buf.skipUB2();                              // array elem error\n    buf.skipUB2();                              // array elem error\n    this.errorInfo.cursorId = buf.readUB2();    // cursor id\n    const errorPos = buf.readSB2();             // error position\n    buf.skipUB1();                              // sql type (19c and earlier)\n    buf.skipUB1();                              // fatal ?\n    buf.skipUB1();                              // flags\n    buf.skipUB1();                              // user cursor options\n    buf.skipUB1();                              // UPI parameter\n    const warnFlag = buf.readUInt8();           // warning flag\n    if (warnFlag & constants.TNS_WARN_COMPILATION_CREATE) {\n      this.warning = errors.getErr(errors.WRN_COMPILATION_CREATE);\n    }\n    this.errorInfo.rowID = buf.readRowID();     // rowid\n    buf.skipUB4();                              // OS error\n    buf.skipUB1();                              // statement error\n    buf.skipUB1();                              // call number\n    buf.skipUB2();                              // padding\n    buf.skipUB4();                              // success iters\n    const numBytes = buf.readUB4();               // oerrdd (logical rowid)\n    if (numBytes > 0) {\n      buf.skipBytesChunked();\n    }\n    // batch error codes\n    const numErrors = buf.readUB2();             // batch error codes array\n    if (numErrors > 0) {\n      this.errorInfo.batchErrors = [];\n      const firstByte = buf.readUInt8();\n      for (let i = 0; i < numErrors; i++) {\n        if (firstByte === constants.TNS_LONG_LENGTH_INDICATOR) {\n          buf.skipUB4();                        // chunk length ignored\n        }\n        const errorCode = buf.readUB2();\n        this.errorInfo.batchErrors.push(new Error(errorCode));\n      }\n      if (firstByte === constants.TNS_LONG_LENGTH_INDICATOR) {\n        buf.skipBytes(1);                       // ignore end marker\n      }\n    }\n\n    // batch error offset\n    const numOffsets = buf.readUB4();           // batch error row offset array\n    if (numOffsets > 0) {\n      if (numOffsets > 65535) {\n        errors.throwErr(errors.ERR_TOO_MANY_BATCH_ERRORS);\n      }\n      const firstByte = buf.readUInt8();\n      let offset;\n      for (let i = 0; i < numOffsets; i++) {\n        if (firstByte === constants.TNS_LONG_LENGTH_INDICATOR) {\n          buf.skipUB4();                        // chunk length ignored\n        }\n        offset = buf.readUB4();\n        if (i < numErrors) {\n          this.errorInfo.batchErrors[i].offset = offset;\n        }\n      }\n      if (firstByte === constants.TNS_LONG_LENGTH_INDICATOR) {\n        buf.skipBytes(1);                       // ignore end marker\n      }\n    }\n\n    // batch error messages\n    const errMsgArr = buf.readUB2();                 // batch error messages array\n    if (errMsgArr > 0) {\n      buf.skipBytes(1);                         // ignore packed size\n      for (let i = 0; i < errMsgArr; i++) {\n        buf.skipUB2();                          // skip chunk length\n\n        this.errorInfo.batchErrors[i].message = buf.readStr(constants.CSFRM_IMPLICIT);\n        buf.skipBytes(2);                       // ignore end marker\n      }\n    }\n\n    this.errorInfo.num = buf.readUB4();         // error number (extended)\n    this.errorInfo.rowCount = buf.readUB8();    // row number (extended)\n\n    // fields added in Oracle Database 20c\n    if (buf.caps.ttcFieldVersion >= constants.TNS_CCAP_FIELD_VERSION_20_1) {\n      buf.skipUB4();                           // sql type\n      buf.skipUB4();                           // server checksum\n    }\n\n    // error message\n    if (this.errorInfo.num !== 0) {\n      this.errorOccurred = true;\n      if (errorPos >= 0) {\n        this.errorInfo.pos = errorPos;\n      }\n      this.errorInfo.message = buf.readStr(constants.CSFRM_IMPLICIT);\n      /*\n       * Remove ending newline from ORA error message\n       */\n      this.errorInfo.message = this.errorInfo.message.trim();\n    }\n    this.endOfResponse = !this.connection.nscon.endOfRequestSupport;\n  }\n\n  processReturnParameter() { }\n\n  processWarningInfo(buf) {\n    const errNum = buf.readUB2();              // warning number\n    const numBytes = buf.readUB2();            // length of warning message\n    buf.skipUB2();                             // flags\n    if (errNum != 0 && numBytes > 0) {\n      // get message string and remove the ending newline.\n      const message = buf.readStr(constants.CSFRM_IMPLICIT).trim();\n      this.warning = new Error(message);\n      this.warning.errorNum = errNum;\n    }\n  }\n\n  decode(buf) {\n    this.process(buf);\n  }\n\n  process(buf) {\n    this.endOfResponse = false;\n    this.flushOutBinds = false;\n    do {\n      this.savePoint(buf);\n      const messageType = buf.readUInt8();\n      this.processMessage(buf, messageType);\n    } while (!this.endOfResponse);\n  }\n\n  savePoint(buf) {\n    buf.savePoint();\n  }\n\n  processMessage(buf, messageType) {\n    if (messageType === constants.TNS_MSG_TYPE_ERROR) {\n      this.processErrorInfo(buf);\n    } else if (messageType === constants.TNS_MSG_TYPE_WARNING) {\n      this.processWarningInfo(buf);\n    } else if (messageType === constants.TNS_MSG_TYPE_STATUS) {\n      this.callStatus = buf.readUB4();\n      this.endToEndSeqNum = buf.readUB2();\n      this.endOfResponse = !this.connection.nscon.endOfRequestSupport;\n    } else if (messageType === constants.TNS_MSG_TYPE_PARAMETER) {\n      this.processReturnParameter(buf);\n    } else if (messageType === constants.TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK) {\n      this.processServerSidePiggyBack(buf);\n    } else if (messageType === constants.TNS_MSG_TYPE_END_OF_REQUEST) {\n      this.endOfResponse = true;\n    } else {\n      errors.throwErr(errors.ERR_UNEXPECTED_MESSAGE_TYPE, messageType, buf.pos, buf.packetNum);\n    }\n  }\n\n  processServerSidePiggyBack(buf) {\n    const opcode = buf.readUInt8();\n    if (opcode === constants.TNS_SERVER_PIGGYBACK_LTXID) {\n      const num_bytes = buf.readUB4();\n      if (num_bytes > 0) {\n        buf.skipBytesChunked();\n      }\n    } else if ((opcode === constants.TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION)\n     || (opcode === constants.TNS_SERVER_PIGGYBACK_TRACE_EVENT)) {\n      // pass\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_OS_PID_MTS) {\n      const numDtys = buf.readUB2();\n      buf.skipUB1();\n      buf.skipBytes(numDtys);\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_SYNC) {\n      buf.skipUB2();                            // skip number of DTYs\n      buf.skipUB1();                            // skip length of DTYs\n      const num_elements = buf.readUB4();\n      buf.skipBytes(1);                         // skip length\n      for (let i = 0; i < num_elements; i++) {\n        let temp16 = buf.readUB2();\n        if (temp16 > 0) {                       // skip key\n          buf.skipBytesChunked();\n        }\n        temp16 = buf.readUB2();\n        if (temp16 > 0) {                       // skip value\n          buf.skipBytesChunked();\n        }\n        buf.skipUB2();                          // skip flags\n      }\n      buf.skipUB4();                            // skip overall flags\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_EXT_SYNC) {\n      buf.skipUB2();\n      buf.skipUB1();\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT) {\n      buf.skipUB2();                            // skip number of DTYs\n      buf.skipUB1();                            // skip length of DTYs\n      buf.skipUB4();                            // skip flags\n      buf.skipUB4();                            // skip error code\n      buf.skipUB1();                            // skip queue\n      const num_bytes = buf.readUB4();          // skip replay context\n      if (num_bytes > 0) {\n        buf.skipBytesChunked();\n      }\n    } else if (opcode === constants.TNS_SERVER_PIGGYBACK_SESS_RET) {\n      buf.skipUB2();\n      buf.skipUB1();\n      const num_elements = buf.readUB2();\n      if (num_elements > 0) {\n        buf.skipUB1();\n        for (let i = 0; i < num_elements; ++i) {\n          let temp16 = buf.readUB2();\n          if (temp16 > 0) {                     // skip key\n            buf.skipBytesChunked();\n          }\n          temp16 = buf.readUB2();\n          if (temp16 > 0) {                     // skip value\n            buf.skipBytesChunked();\n          }\n          buf.skipUB2();                        // skip flags\n        }\n      }\n      const flags = buf.readUB4();              // session flags\n      if (flags & constants.TNS_SESSGET_SESSION_CHANGED) {\n        if (this.connection._drcpEstablishSession) {\n          this.connection.statementCache.clearCursors();\n        }\n      }\n      this.connection._drcpEstablishSession = false;\n      buf.skipUB4();                            // session id\n      buf.skipUB2();                            // serial number\n    } else {\n      errors.throwErr(errors.ERR_UNKOWN_SERVER_SIDE_PIGGYBACK, opcode);\n    }\n  }\n\n  writePiggybacks(buf) {\n    if (this.connection._currentSchemaModified) {\n      this._writeCurrentSchemaPiggyback(buf);\n    }\n    if (this.connection.statementCache._cursorsToClose.size > 0 && !this.connection._drcpEstablishSession) {\n      this.writeCloseCursorsPiggyBack(buf);\n    }\n    if (\n      this.connection._actionModified ||\n      this.connection._clientIdentifierModified ||\n      this.connection._dbopModified ||\n      this.connection._clientInfoModified ||\n      this.connection._moduleModified\n    ) {\n      this._writeEndToEndPiggybacks(buf);\n    }\n    if (this.connection._tempLobsTotalSize > 0) {\n      this.writeCloseTempLobsPiggyback(buf);\n    }\n  }\n\n  writePiggybackHeader(buf, functionCode) {\n    buf.writeUInt8(constants.TNS_MSG_TYPE_PIGGYBACK);\n    buf.writeUInt8(functionCode);\n    buf.writeSeqNum();\n    if (buf.caps.ttcFieldVersion >= constants.TNS_CCAP_FIELD_VERSION_23_1_EXT_1) {\n      buf.writeUB8(0);                          // token number\n    }\n  }\n\n  writeCloseCursorsPiggyBack(buf) {\n    this.writePiggybackHeader(buf, constants.TNS_FUNC_CLOSE_CURSORS);\n    buf.writeUInt8(1);\n    this.connection.statementCache.writeCursorsToClose(buf);\n  }\n\n  writeCloseTempLobsPiggyback(buf) {\n    const lobsToClose = this.connection._tempLobsToClose;\n    const opCode = constants.TNS_LOB_OP_FREE_TEMP | constants.TNS_LOB_OP_ARRAY;\n\n    this.writePiggybackHeader(buf, constants.TNS_FUNC_LOB_OP);\n\n    buf.writeUInt8(1); // pointer\n    buf.writeUB4(this.connection._tempLobsTotalSize);\n    buf.writeUInt8(0); // dest LOB locator\n    buf.writeUB4(0);\n    buf.writeUB4(0); // source LOB locator\n    buf.writeUB4(0);\n    buf.writeUInt8(0); // source LOB offset\n    buf.writeUInt8(0); // dest LOB offset\n    buf.writeUInt8(0); // charset\n    buf.writeUB4(opCode);\n    buf.writeUInt8(0); // scn\n    buf.writeUB4(0); // LOB scn\n    buf.writeUB8(0); // LOB scnl\n    buf.writeUB8(0);\n    buf.writeUInt8(0);\n\n    // array LOB fields\n    buf.writeUInt8(0);\n    buf.writeUB4(0);\n    buf.writeUInt8(0);\n    buf.writeUB4(0);\n    buf.writeUInt8(0);\n    buf.writeUB4(0);\n    for (const val of lobsToClose) {\n      buf.writeBytes(val);\n    }\n\n    // Reset Values\n    this.connection._tempLobsToClose = [];\n    this.connection._tempLobsTotalSize = 0;\n  }\n\n  _writeCurrentSchemaPiggyback(buf) {\n    this.writePiggybackHeader(buf, constants.TNS_FUNC_SET_SCHEMA);\n    buf.writeUInt8(1);\n    const bytes = Buffer.byteLength(this.connection.currentSchema);\n    buf.writeUB4(bytes);\n    buf.writeBytesWithLength(Buffer.from(this.connection.currentSchema));\n  }\n\n  _writeEndToEndPiggybacks(buf) {\n    let flags = 0;\n\n    // determine which flags to send\n    if (this.connection._actionModified) {\n      flags |= constants.TNS_END_TO_END_ACTION;\n    }\n    if (this.connection._clientIdentifierModified) {\n      flags |= constants.TNS_END_TO_END_CLIENT_IDENTIFIER;\n    }\n    if (this.connection._clientInfoModified) {\n      flags |= constants.TNS_END_TO_END_CLIENT_INFO;\n    }\n    if (this.connection._moduleModified) {\n      flags |= constants.TNS_END_TO_END_MODULE;\n    }\n    if (this.connection._dbOpModified) {\n      flags |= constants.TNS_END_TO_END_DBOP;\n    }\n\n    // write initial packet data\n    this.writePiggybackHeader(buf, constants.TNS_FUNC_SET_END_TO_END_ATTR);\n    buf.writeUInt8(0);                  // pointer (cidnam)\n    buf.writeUInt8(0);                  // pointer (cidser)\n    buf.writeUB4(flags);\n\n    const clientIdentifierBytes = this.writeEndEndTraceValue(buf, this.connection._clientIdentifier, this.connection._clientIdentifierModified);\n    const moduleBytes = this.writeEndEndTraceValue(buf, this.connection._module, this.connection._moduleModified);\n    const actionBytes = this.writeEndEndTraceValue(buf, this.connection._action, this.connection._actionModified);\n\n    // write unsupported bits\n    buf.writeUInt8(0);                  // pointer (cideci)\n    buf.writeUB4(0);                    // length (cideci)\n    buf.writeUInt8(0);                  // cidcct\n    buf.writeUB4(0);                    // cidecs\n\n    const clientInfoBytes = this.writeEndEndTraceValue(buf, this.connection._clientInfo, this.connection._clientInfoModified);\n    // write unsupported bits\n    buf.writeUInt8(0);                  // pointer (cideci)\n    buf.writeUB4(0);                    // length (cideci)\n    buf.writeUInt8(0);                  // cidcct\n    buf.writeUB4(0);                    // cidecs\n    const dbOpBytes = this.writeEndEndTraceValue(buf, this.connection._dbOp, this.connection._dbOpModified);\n\n    // write strings\n    if (this.connection._clientIdentifierModified && this.connection._clientIdentifier) {\n      buf.writeBytesWithLength(clientIdentifierBytes);\n    }\n    if (this.connection._moduleModified && this.connection._module) {\n      buf.writeBytesWithLength(moduleBytes);\n    }\n    if (this.connection._actionModified && this.connection._action) {\n      buf.writeBytesWithLength(actionBytes);\n    }\n    if (this.connection._clientInfoModified && this.connection._clientInfo) {\n      buf.writeBytesWithLength(clientInfoBytes);\n    }\n    if (this.connection._dbOpModified && this.connection._dbOp) {\n      buf.writeBytesWithLength(dbOpBytes);\n    }\n\n    // reset flags and values\n    this.connection._actionModified = false;\n    this.connection._action = \"\";\n    this.connection._clientIdentifierModified = false;\n    this.connection._clientIdentifier = \"\";\n    this.connection._clientInfoModified = false;\n    this.connection._clientInfo = \"\";\n    this.connection._dbOpModified = false;\n    this.connection._dbOp = \"\";\n    this.connection._moduleModified = false;\n    this.connection._module = \"\";\n  }\n\n  writeEndEndTraceValue(buf, value, modified) {\n    // write client identifier header info\n    let writtenBytes;\n    if (modified) {\n      buf.writeUInt8(1);              // pointer (client identifier)\n      if (value) {\n        writtenBytes = Buffer.from(value);\n        buf.writeUB4(writtenBytes.length);\n      } else {\n        buf.writeUB4(0);\n      }\n    } else {\n      buf.writeUInt8(0);              // pointer (client identifier)\n      buf.writeUB4(0);                // length of client identifier\n    }\n    return writtenBytes;\n  }\n\n  // Called when an error is encountered during decode of RPC\n  saveDeferredErr() {\n    if (!this.deferredErr) {\n      this.deferredErr = errors.getErr(...arguments);\n    }\n  }\n}\n\nmodule.exports = Message;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}